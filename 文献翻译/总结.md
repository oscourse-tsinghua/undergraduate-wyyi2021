# Blockene 文献阅读总结

## 主要概念与设计

### 结构

- 公民节点：在智能手机上运行，资源消耗少，规模大，可信度高
  - 区块的提交、选择、上传等工作由**委员会**成员进行
- 政治家节点：资源丰富的服务器，进行大部分重要工作，规模小，可信度低
  - 政治家是设置好的，不参与共识，只提供资源
- 政治家节点上进行大量的计算、存储，政治家之间进行信息传播（**八卦**）；公民只从政治家那里询问自己需要的内容

### 委员会

- 成员选举：使用N-10区块的Hash计算**VRF**（可验证随机函数）

- 防分叉和冷静期
- 交易验证：默克尔树

### 区块的提案、选择

- 基于N-1区块的Hash计算VRF，筛选出提案者
- 预先声明提交
- tx_pool：将交易分块，每一块内的交易对应一个tx_pool
  - 冻结交易，生成一个tx_pool和提交记录：Sign(Hash(tx_pool中交易+区块号))

  - 公民两次随机的重新上传

### 优先八卦

政治家之间进行有关tx_pool集合的八卦，使所有诚实政治家拥有所有tx_pool。优先八卦是对于不诚实政治家太多、全面传播tx_pool浪费资源的问题所作的优化。

- 握手：发送资源前先询问对方，缺哪些就发哪些

- 自私八卦：使发送者总是优先选择拥有最多发送者缺失的tx_pool数量的同伴（防止恶意者声称自己什么都没有）
- 鼓励节俭：发送者拥有全部tx_pool后，优先选择声称拥有最多tx_pool的同伴

### 基于采样的默克尔树读写

对于默克尔树验证代价高的优化。

#### 读

- 每个公民只获取键值而不是完整的关键路径，询问政治家是否正确（政治家进行计算）
- 每个公民进行抽查，使用挑战路径
- 抽查不能覆盖的部分属于较小的异常列表，公民使用桶进行交叉验证

#### 写

- 把默克尔树从中间拆开，露出来的部分为边界节点
- 抽样、验证边界节点的正确性
- 依次纠正不正确的，最后算出根节点



## 个人想法

### 可借鉴部分

- 庞大规模的公民+提供资源的政治家，整体结构设计与车载网的车辆+RSU非常匹配

- 公民（在智能手机上运行）的身份与手机可信硬件TEE的认证公钥有唯一对应，防止西比尔攻击（重点：硬件认证）

- 一些降低公民参与成本的措施：

  - 每次选举委员会，只有这部分公民参与共识
  - 每隔10个区块才参选一次，降低唤醒频率
  - 委员会中选出提案者，作为生成区块的候选人

  公民轮流被选中参与共识。注意两步选择都是基于VRF（可验证随机函数）的，另外公民的规模一定要足够大（文中为数百万级）

- 比较关键的优化：

  - 政治家之间的优先八卦：设置政治家选择交流对象的优先级函数，防止一些可能的恶意行为（文中是针对tx_pool的八卦）（重点：如何确定优先级）
  - 默克尔树验证的优化：抽样检查+交叉验证异常列表，写操作对原树拆分（比较笼统，没有完全理解）

### 未说明/待研究

- 如何划定一个公民/政治家是恶意的还是诚实的？文中没有给出具体说明，个人理解是以是否有恶意行为作为依据的，因为部分对系统设计的介绍是针对具体恶意行为的。
- “安全的政治家样本”：保证至少有一个诚实政治家。怎么保证的？还是需要维护信誉值？
- 共识机制的流程、预先声明提交、tx_pool（交易分块）的设计，个人不是特别理解，设计内容和设计理由都不是很清楚。
- 各部分的理论证明，本文中只给出了证明概述（基本只描述了各引理、推论的结论），全部证明过程在未发表的完整版中，暂时不能判断其严谨性。
- 本文的行文逻辑，基本上是按特定功能或技术进行划分的，个人认为缺少一些按运行顺序描述完整流程的文字。