# 信誉值计算方案

## 考虑因素

- 新注册用户
- 数据更新频率
  - 稳定的参与
  - 具体活跃程度
- 行驶速度？
- 是否为已知联络人
- 来自邻居的位置验证
  - 请求/响应的地理位置在设定范围之外
  - 请求/响应的地理位置在附近，但不能由短距离通信联系到

- 与其它车辆达成的交易
  - 交易方/签署方
- 数据、消息传播（辅助，因为数据信息交换相对稀疏，并且用于信誉计算可能延迟较大）
  - 消息的原创性/冲突
  - 车辆与事件之间的距离
  - 接收信号强度（RSS）
  - 接收到消息的车辆数量（受了该消息影响的邻居规模）
- 对欺骗行为的举报



## 需要防范的攻击

- Prover使用自己的位置信息和另一人的身份信息发送请求
- 邻居为Prover生成虚假的位置验证/交易成功信息
- 邻居为Prover生成恶意的位置验证/交易失败信息



## 计算

- 信誉值范围：0-100的整数，高于某个阈值$T$则被判定为可信的
- 新注册用户的初始信誉值为$T_0$，$T_0<T$？
- 数据长时间不更新的，信誉值减小，采用分段函数？两种方案：
  - 检查最后两次提交的时间间隔
  - 检查最后两次提交的区块间隔
  - 稳定、持续地高活跃度可适当增加信誉（奖励要明显小于恶意行为可能导致的惩罚）
- 成功/失败的位置验证对信誉值影响
  - 两者加权，计算一个信誉值的偏移量，加到原信誉值上。
  - 比如：$\Delta=\theta_1*(success-s_0)+\theta_2*failure$
    - 用户完成了一定数量的成功位置验证信誉值才会增加，防止合谋
    - 验证失败必然会降低可信度
  - 后续可以考虑区分请求者和邻居身份的信誉值
    - 两种身份的偏移量计算公式与上面类似，各取不同的参数
    - 区别错误信息，看位置验证失败是哪一方的问题
    - 也可以把这两个（加权）平均一下，相当于成功的位置验证同时影响双方信誉
- 成功交易
  - 涉及到实际交易，相应的信誉奖励可以相对更大
  - 与交易数额、交易类型相关
- 消息传播
  - 周期性报告行驶状态、交通状况
    - 结合位置验证、多车消息汇总情况（和道路修正？）判断其真实度、准确性
  - 对突发事件的响应和警告
    - 由多车消息汇总情况判断其真实度、准确性
    - 可设定响应级别，信誉奖励/惩罚与级别正相关
  - 消息真实度决定信誉增加还是减少；可以考虑再加入具体量化的准确性
  - 信誉偏移量与车流密度正相关，（可选）与发送时间负相关（越早发出信誉偏移量越大）
  - 奖励与惩罚分别设置系数
- 举报恶意行为
  - 对于位置验证、交易、消息中的欺骗行为，同一通过发送消息进行举报？
  - 如何认定举报是合理的？？
    - 被多人举报可认定为恶意（对于部分位置验证、交易可能无法实现）
  - 成功举报使信誉增加；恶意的举报使信誉减少



## 使用

### 位置验证

- 简单：低于可信阈值的不能作为邻居提供位置验证

- 复杂：每条位置验证有自己的可信度，可以是验证双方信誉值的（加权）平均
  - 按阈值划分可信/不可信
- 注意，要让有恶意行为的车辆受到惩罚，但是对偶尔/不得已出现了故障的车辆，信誉值在行为正常时还能再涨回去

### 道路匹配和位置修正

### 路况计算

- 低于可信阈值的数据直接丢弃

